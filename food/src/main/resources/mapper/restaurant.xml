<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="restaurant"> <!-- mapper파일의 이름 -->
	<select id="restaurantList" parameterType="restaurant.RestaurantVo" resultType="restaurant.RestaurantVo">
		SELECT * FROM restaurant
		<include refid = "restaurantWhere"/>
		ORDER BY r_regdate DESC    
		LIMIT ${startIdx},10
	</select>
	
	<sql id = "restaurantWhere">
		<where>
			<if test ="searchType ==''">   
			 	(r_name LIKE '%${searchWord}%' OR r_status LIKE '%${searchWord}%')
			 </if>
			 <if test= "searchType != null and searchType != ''">
			 	${searchType} LIKE '%${searchWord}%'
			 </if>
			 <if test="r_no > 0">    
			 	AND r_no = ${r_no}
			 </if>
		</where>     
	</sql>
	<select id="restaurantCount" resultType="int" parameterType="restaurant.RestaurantVo">
		SELECT COUNT(*) FROM restaurant
		<include refid="restaurantWhere"/>
	</select> 
</mapper>